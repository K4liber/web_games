<div class="main-div relative">
    <div 
        class="modal align-right"
        *ngIf="isModalOpen"
    >
        <button
            class="close-modal-button standard-margin"
            (click)="closeModal()"
        >
            Close
        </button>
        <div 
            class="hand-title"
        >
            {{ lastGuessMsg }}
        </div>
        <ng-container *ngFor="let playerHand of playersCards">
            <div 
                class="hand-title"
            >
                [{{ playerHand[0] }}] last hand:
            </div>
            <div 
                class="hand"
            >
                <div class="card" *ngFor="let card of playerHand[1]">
                    <img [src]="getCardImageSrc(card)" alt="image">
                </div>
            </div>
        </ng-container>
    </div>
    <button 
        *ngIf="!isPlayerReady"
        (click)="play()"
        class="standard-margin"
    >
        I am ready to play Bluff!
    </button>
    <ng-container *ngIf="isPlayerReady && hand.length === 0">
        <div
            class="standard-margin"
        >
            Following players are ready: {{ players }}
        </div>
        <button
            *ngIf="isGameReady"
            (click)="start()"
            class="standard-margin"
        >
            Start a game!
        </button>
        <div
            *ngIf="!isGameReady"
            class="standard-margin"
        >
            Waiting for players ...
        </div>
    </ng-container>
    <div 
        class="hand-title"
        *ngIf="isPlayerReady && hand.length !== 0"
    >
        Your hand:
    </div>
    <div 
        class="hand"
        *ngIf="isPlayerReady && hand.length !== 0"
    >
        <div class="card" *ngFor="let card of hand">
            <img [src]="getCardImageSrc(card)" alt="image">
        </div>
    </div>
    <div *ngIf="untilMyTurn > 0 && progress.length && isGameReady" class="main-info">
        [{{ currentUsername }}] turn. {{ leftPlayersString }} 
    </div>
    <div *ngIf="possibleGuesses !== null" class="main-info">
        <div>
            Your turn!
        </div>
        <div *ngIf="possibleGuesses.length">
            <select
                [(ngModel)]="selectedSequence"
            >
                <option value="" disabled selected hidden>Choose a sequence</option>
                <option 
                    *ngFor="let guess of possibleGuesses" 
                    [ngValue]="guess"
                >
                    {{ guess }}
                </option>
            </select>
            <button
                (click)="onSelect()"
                [disabled]="selectedSequence.trim() === ''"
                class="standard-margin"
            >
                Guess
            </button>
        </div>
        
        <button
            [disabled]="isStart"
            (click)="onCheck()"
            class="standard-margin"
        >
            Check
        </button>
    </div>
    <div class="messages" *ngIf="progress.length">
        <p 
            *ngFor="let progressStep of progress; let i = index"
            [ngClass]="i === 0 ? 'last-info' : 'normal-info'"
        >
            {{ progressStep }}
        </p>
    </div>
</div>
